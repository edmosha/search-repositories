(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,o=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===t(o)?o:String(o)),i)}var o}const r=function(){function t(e,r){var n=e.name,i=e.url,o=e.description,a=e.language,u=e.owner,l=e.ownerAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._url=i,this._description=o,this._language=a,this._owner=u,this._ownerAvatar=l}var r,n;return r=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector("#repo-card").content.querySelector(".results__item").cloneNode(!0)}},{key:"createRepoCard",value:function(){this._element=this._getTemplate(),console.log(this);var t=this._element.querySelector(".card__repo-link"),e=this._element.querySelector(".card__description"),r=this._element.querySelector(".card__language"),n=this._element.querySelector(".card__author"),i=this._element.querySelector(".card__author-avatar");return t.textContent=this._name,t.href=this._url,n.textContent=this._owner,i.src=this._ownerAvatar,i.alt=this._owner,this._description?e.textContent=this._description:e.textContent="",this._language?r.textContent=this._language:r.textContent="",this._element}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}const o=function(){function t(e,r){var n=e.handleFormSubmit;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._element=document.querySelector(r),this._input=this._element.querySelector(".search__input"),this._handleFormSubmit=n}var e,r;return e=t,(r=[{key:"_getInputValue",value:function(){return this._input.value}},{key:"setEventListeners",value:function(){var t=this;this._element.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValue())}))}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(i)?i:String(i)),n)}var i}const l=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._errorElementSelector=e.errorElementSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._formElement=r}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t,e){t.classList.add(this._inputErrorClass),this._errorElem.textContent=e}},{key:"_hideInputError",value:function(t){t.classList.remove(this._inputErrorClass),this._errorElem.textContent=""}},{key:"_isValid",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_toggleButtonState",value:function(){this._inputElem.validity.valid?(this._buttonElem.classList.remove(this._inactiveButtonClass),this._buttonElem.removeAttribute("disabled")):(this._buttonElem.classList.add(this._inactiveButtonClass),this._buttonElem.setAttribute("disabled","true"))}},{key:"_setEventListener",value:function(){var t=this;this._inputElem=this._formElement.querySelector(this._inputSelector),this._buttonElem=this._formElement.querySelector(this._submitButtonSelector),this._errorElem=this._formElement.querySelector(this._errorElementSelector),this._toggleButtonState(),this._inputElem.addEventListener("input",(function(){t._isValid(t._inputElem),t._toggleButtonState()}))}},{key:"resetValidation",value:function(){this._toggleButtonState(),this._inputElem.value=""}},{key:"enableValidation",value:function(){this._setEventListener()}}])&&u(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var s=document.querySelector(".results__container"),c=document.querySelector(".spinner"),m=document.querySelector(".search__form");new o({handleFormSubmit:function(t){var e;s.innerHTML="",c.classList.add("spinner_visible"),_.resetValidation(),(e=t,fetch("https://api.github.com/search/repositories?q=".concat(e,"&per_page=10")).then((function(t){return t.ok?t.json():Promise.resolve(t.statusText)})).then((function(t){var e=[];return t.items.forEach((function(t){e.push({name:t.name,url:t.html_url,description:t.description,language:t.language,owner:t.owner.login,ownerAvatar:t.owner.avatar_url})})),e}))).then((function(t){0!==t.length?t.forEach((function(t){var e=new r(t,"#repo-card");s.append(e.createRepoCard())})):s.insertAdjacentHTML("afterbegin",'<li><p class="results__status">Ничего не найдено!</p></li>')})).catch((function(t){s.insertAdjacentHTML("afterbegin",'<li><p class="results__status">Ошибка! '.concat(t.errorText,"</p></li>"))})).finally((function(){return c.classList.remove("spinner_visible")}))}},".search__form").setEventListeners();var _=new l({inputSelector:".search__input",submitButtonSelector:".search__submit-btn",errorElementSelector:".search__error",inactiveButtonClass:"search__submit-btn_inactive",inputErrorClass:"search__input_type_error"},m);_.enableValidation()})();